<?php

/**
 * @file
 * Module file for custom finding aid module.
 */

use Drupal\Core\Routing\RouteMatchInterface;
use Drupal\Core\Extension\ModuleInstallerInterface;

/**
* Handle modules install
*/
function custom_findingaid_module_install() {
  $moduleHandler = \Drupal::service('module_handler');
  if ( $moduleHandler->moduleExists('aspace_findingaid') ) {
      \Drupal::service('module_installer')->install(['custom_findingaid_importer'], TRUE);
      }
}

/**
* Handle module uninstall
*/
function custom_findingaid_module_preuninstall($module) {
   $moduleHandler = \Drupal::service('module_handler');
   if ( ($module === 'aspace_findingaid') && $moduleHandler->moduleExists('custom_findingaid_importer') ) {
          \Drupal::logger('custom_findingaid_module')->error('Failed to uninstall Aspace Finding Aid module while Custom finding Aid importer is enabled.');
        }

}
/**
 * Implements hook_help().
 */
function custom_findingaid_module_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.custom_findingaid_module':
      $output = '';
      $output .= '<h3>' . t('About') . '</h3>';
      $output .= '<p>' . t('Provides integration between Drupal and various Finding Aid data sources') . '</p>';
      return $output;

    default:
  }
}
